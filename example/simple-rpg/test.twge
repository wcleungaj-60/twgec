__skydowLocs__ = [Point(23,26)];
__title__ = "RPG試驗";
__useDefaultItems__ = true;
__map__ = "CG.TWilightGameEventCompiler/rpg/simple_rpg.twmap";
__roomSize__ = 1;

def setInt(key, value) : actions {
    setGlobal(key = key, type = "integer", value = value);
}

block monsterDead {
    __repeat__ = -1;
    triggers {
        actorDead(actorId = "monster");
    }
    actions {
        setInt("Exp", "{Exp}+1");
    }
}

block monsterSpawn {
    __repeat__ = -1;
    checks {
        //TODO: Support Check number of character
    }
    actions {
        // TODO: Support a list of spawn points
        addActor(name = "鹿(60)", id = "monster*", camp = "第三", hp = 60, x = 1, y = 1, localVarname = "actor");
        actorFollow(actorId = "actor", type = "跟隨自己");
    }
}

block levelUp {
    __repeat__ = -1;
    checks {
        checkNumber(lhs = "{Exp}", op = ">=", rhs = "{ExpNeeded}");
    }
    actions {
        setInt("Exp", "{Exp}-{ExpNeeded}");
        setInt("Level", "{Level}+1");
        setInt("ExpNeeded", "{Level}*5+5");
    }
}

block init {
    actions {
        setInt("STR", 0); // 力量
        setInt("CON", 0); // 體質
        setInt("AGI", 0); // 敏捷
        setInt("INT", 0); // 智慧
        setInt("PSY", 0); // 精神
        setInt("Level", 1);
        setInt("Exp", 0);
        setInt("ExpNeeded", 10);
    }
}